{% extends "base.html" %}
{% block title %}Profile Page{% endblock %}

{% block body %}
<div class="container body">
  <h2>
    {{ username }}
    {% if user.is_authenticated %}
      {% if subscribed %}
        <button type="submit" class="btn btn-secondary pull-right" value="subscribe" name="unsubscribe">Unsubscribe</button>
      {% else %}
        <button type="submit" class="btn btn-secondary pull-right" value="subscribe" name="subscribe">Subscribe</button>
      {% endif %}
    {% endif %}
  </h2>
  <hr>
	{% if podcasts %}
		{% for podcast in podcasts %}
		<div class="card mb-4">
			<div class="card-header text-muted">
				Posted on {{ podcast.created.date }} in
				<a href="/topic/{{ podcast.topic.topic }}">{{ podcast.topic.topic }}</a>
			</div>
			<div class="card-body">
				<h2 class="card-title">{{ podcast.title }}</h2>
				<p class="card-text">
					{% if podcast.description %}
						{{ podcast.description | slice:":125" }}
						{% if podcast.description|length > 125 %}
							...
						{% endif %}
					{% endif %}</p>
				<a href="/podcast/{{podcast.slugfield}}/" class="btn btn-secondary">Listen Now</a>
			</div>
			<div class="card-footer text-muted">
				{{ podcast.views }} views |
				{{ podcast.num_upvotes }} upvotes |
				{{ podcast.num_comments }} comments |
				{{ podcast.num_favorites }} favorites
			</div>
		</div>
		{% endfor %}
	{% else %}
	<p>No podcasts found</p>
	{% endif %}
</div>
{% endblock %}
